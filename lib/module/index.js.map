{"version":3,"names":["NativeModules","Platform","DeviceEventEmitter","NativeEventEmitter","LINKING_ERROR","select","ios","default","ApptentiveModule","Proxy","get","Error","_onUnreadMessageCountChanged","_eventsRegistered","ApptentiveConfiguration","constructor","key","signature","apptentiveKey","apptentiveSignature","logLevel","distributionName","distributionVersion","require","version","shouldEncryptStorage","shouldSanitizeLogMessages","setTroubleshootingModeEnabled","Apptentive","register","configuration","emitter","android","addListener","unreadMessageCountChangedEvent","e","undefined","count","engage","event","presentMessageCenter","showMessageCenter","setPersonName","name","getPersonName","setPersonEmail","email","getPersonEmail","addCustomPersonData","value","OS","addCustomPersonDataBoolean","addCustomPersonDataNumber","addCustomPersonDataString","Promise","_","reject","addCustomPersonDataBool","removeCustomPersonData","addCustomDeviceData","addCustomDeviceDataBoolean","addCustomDeviceDataNumber","addCustomDeviceDataString","addCustomDeviceDataBool","removeCustomDeviceData","canShowInteraction","canShowMessageCenter","getUnreadMessageCount","onUnreadMessageCountChanged"],"sources":["index.tsx"],"sourcesContent":["import { NativeModules, Platform, DeviceEventEmitter, NativeEventEmitter } from 'react-native';\n\nconst LINKING_ERROR =\n  `The package 'apptentive-react-native' doesn't seem to be linked. Make sure: \\n\\n` +\n  Platform.select({ ios: \"- You have run 'pod install'\\n\", default: '' }) +\n  '- You rebuilt the app after installing the package\\n' +\n  '- You are not using Expo managed workflow\\n';\n\n// Get the Apptentive Native Module\nconst ApptentiveModule = NativeModules.ApptentiveModule\n  ? NativeModules.ApptentiveModule\n  : new Proxy({},{ get() {\n          throw new Error(LINKING_ERROR);\n        },});\n\nlet _onUnreadMessageCountChanged: (count: number) => {};\nlet _eventsRegistered = false;\n\n///// Class Implementation\n\nexport class ApptentiveConfiguration {\n\n  apptentiveKey: string;\n  apptentiveSignature: string;\n  logLevel: string;\n  distributionName: string;\n  distributionVersion: string;\n  shouldEncryptStorage: boolean;\n  shouldSanitizeLogMessages: boolean;\n  setTroubleshootingModeEnabled: boolean;\n\n  constructor(key: string, signature: string) {\n    this.apptentiveKey = key;\n    this.apptentiveSignature = signature;\n    this.logLevel = \"info\";\n    this.distributionName = \"React Native\";\n    this.distributionVersion = require(\"../package\").version;\n    this.shouldEncryptStorage = false;\n    this.shouldSanitizeLogMessages = true;\n    this.setTroubleshootingModeEnabled = true;\n  }\n}\n\nexport class Apptentive {\n\n  // Register the Apptentive SDK\n  static register(configuration: ApptentiveConfiguration): Promise<boolean> {\n    if (!_eventsRegistered) {\n      _eventsRegistered = true;\n\n      const emitter = Platform.select({\n        ios: () => new NativeEventEmitter(ApptentiveModule),\n        android: () => DeviceEventEmitter,\n        default: () => DeviceEventEmitter\n      })();\n\n      emitter.addListener(ApptentiveModule.unreadMessageCountChangedEvent, (e) => {\n        if (_onUnreadMessageCountChanged !== undefined) {\n          _onUnreadMessageCountChanged(e.count);\n        }\n      });\n    }\n\n    return ApptentiveModule.register(configuration);\n  }\n\n  // Engage an event by an event name string\n  static engage(event: string): Promise<boolean> {\n    return ApptentiveModule.engage(event);\n  }\n\n  // Present the Message Center\n  static presentMessageCenter(): Promise<boolean> {\n    return ApptentiveModule.showMessageCenter();\n  }\n\n  // Set person name\n  static setPersonName(name: string): Promise<boolean> {\n    return ApptentiveModule.setPersonName(name);\n  }\n\n  // Get person name\n  static getPersonName(): Promise<string> {\n    return ApptentiveModule.getPersonName();\n  }\n\n  // Set person email\n  static setPersonEmail(email: string): Promise<boolean> {\n    return ApptentiveModule.setPersonEmail(email);\n  }\n\n  // Get person name\n  static getPersonEmail(): Promise<string> {\n    return ApptentiveModule.getPersonEmail();\n  }\n\n  // Add person custom data based on key string and value of type bool, number, or string\n  static addCustomPersonData(key: string, value: any): Promise<boolean> {\n    if (Platform.OS === \"ios\") {\n      return ApptentiveModule.addCustomPersonData(key, value);\n    }\n    else if (Platform.OS === \"android\") {\n      if (typeof value === 'boolean') {\n        return ApptentiveModule.addCustomPersonDataBoolean(key, value);\n      }\n      if (typeof value === 'number') {\n        return ApptentiveModule.addCustomPersonDataNumber(key, value);\n      }\n      if (typeof value === 'string') {\n        return ApptentiveModule.addCustomPersonDataString(key, value);\n      }\n    } else {\n      // Return a default rejected Promise if platform is not supported\n      return new Promise<boolean>((_, reject) => {reject(\"Apptentive Error: Unsupported platform: \" + (Platform.OS));});\n    }\n    // Return a default rejected Promise if type is not supported\n    return new Promise<boolean>((_, reject) => {reject(\"Apptentive Error: Unsupported type of custom data: \" + (typeof value));});\n  }\n\n  /**\n   * @deprecated The method should not be used. Use addCustomPersonData() instead\n   */\n  static addCustomPersonDataBool(key: string, value: boolean) {\n    return Apptentive.addCustomPersonData(key, value);\n  }\n\n  /**\n   * @deprecated The method should not be used. Use addCustomPersonData() instead\n   */\n  static addCustomPersonDataNumber(key: string, value: number) {\n    return Apptentive.addCustomPersonData(key, value);\n  }\n\n  /**\n   * @deprecated The method should not be used. Use addCustomPersonData() instead\n   */\n  static addCustomPersonDataString(key: string, value: string) {\n    return Apptentive.addCustomPersonData(key, value);\n  }\n\n  // Remove person custom data based on key string\n  static removeCustomPersonData(key: string): Promise<boolean> {\n    return ApptentiveModule.removeCustomPersonData(key);\n  }\n\n  // Add device custom data based on key string and value of type bool, number, or string\n  static addCustomDeviceData(key: string, value: any): Promise<boolean> {\n    if (Platform.OS === \"ios\") {\n      return ApptentiveModule.addCustomDeviceData(key, value);\n    }\n    else if (Platform.OS === \"android\") {\n      if (typeof value === 'boolean') {\n        return ApptentiveModule.addCustomDeviceDataBoolean(key, value);\n      }\n      if (typeof value === 'number') {\n        return ApptentiveModule.addCustomDeviceDataNumber(key, value);\n      }\n      if (typeof value === 'string') {\n        return ApptentiveModule.addCustomDeviceDataString(key, value);\n      }\n    } else {\n      // Return a default rejected Promise if platform is not supported\n      return new Promise<boolean>((_, reject) => {reject(\"Apptentive Error: Unsupported platform: \" + (Platform.OS));});\n    }\n    // Return a default rejected Promise if type is not supported\n    return new Promise<boolean>((_, reject) => {reject(\"Apptentive Error: Unsupported type of custom data: \" + (typeof value));});\n  }\n\n  /**\n   * @deprecated The method should not be used. Use addCustomDeviceData() instead\n   */\n  static addCustomDeviceDataBool(key: string, value: boolean) {\n    return Apptentive.addCustomDeviceData(key, value);\n  }\n\n  /**\n   * @deprecated The method should not be used. Use addCustomDeviceData() instead\n   */\n  static addCustomDeviceDataNumber(key: string, value: number) {\n    return Apptentive.addCustomDeviceData(key, value);\n  }\n\n  /**\n   * @deprecated The method should not be used. Use addCustomDeviceData() instead\n   */\n  static addCustomDeviceDataString(key: string, value: string) {\n    return Apptentive.addCustomDeviceData(key, value);\n  }\n\n  // Remove device custom data based on key string\n  static removeCustomDeviceData(key: string): Promise<boolean> {\n    return ApptentiveModule.removeCustomDeviceData(key);\n  }\n\n  // Check if an event name will launch an interaction\n  static canShowInteraction(event: string): Promise<boolean> {\n    return ApptentiveModule.canShowInteraction(event);\n  }\n\n  // Check if Message Center can be shown\n  static canShowMessageCenter(): Promise<boolean> {\n    return ApptentiveModule.canShowMessageCenter();\n  }\n\n  // Get unread message count in Message Center\n  static getUnreadMessageCount(): Promise<number> {\n    return ApptentiveModule.getUnreadMessageCount();\n  }\n\n  /**\n   * @return Current callback for the unread message count change in the Message Center.\n   */\n  static get onUnreadMessageCountChanged() {\n    return _onUnreadMessageCountChanged;\n  }\n\n  /**\n   * Sets current callback for the unread message count change in the Message Center.\n   * @param value Callback function with a single integer parameter.\n   */\n  static set onUnreadMessageCountChanged(value) {\n    _onUnreadMessageCountChanged = value;\n  }\n\n}\n"],"mappings":"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"}